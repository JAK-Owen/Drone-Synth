<!DOCTYPE html>
<html>

<head>
</head>
<script src='https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.6/Tone.js'></script>
<script src= 'https://cdn.jsdelivr.net/npm/nexusui@latest/dist/NexusUI.js'></script>
<link rel="stylesheet" href="styleSheet.css">


<body>
<div id='container'></div>


<div id="gain"><div>




<script>

 // Synth_________________________________________

 var volume = new Tone.Volume(-Infinity).toMaster();

const synth = new Tone.PolySynth(Tone.MonoSynth, {
			volume: -8,
			oscillator: {
				type: "sawtooth"
			},
			envelope: {
				attack: 1.0,
				decay: 1.0,
				sustain: 1.0,
				release: 1.0,
			},
			filterEnvelope: {
				attack: 1.0,
				decay: 0.7,
				sustain: 0.1,
				release: 0.8,
				baseFrequency: 300,
				octaves: 4
			},
		}).connect(volume);


// Keyboard____________________________________________

var notes = ['C','D','E','F','G','A','B'];
var html = "";

for (var octave = -2; octave < 0; octave++)
{
for (var i = 0; i < notes.length; i++) {
    var hasSharp = true;
    var note = notes[i];

    if (note == 'E' || note == 'B')
        hasSharp = false;
    html += `<div class='whitenote'onmousedown='noteDown(this, false)'
    data-note='${note + (octave+4)}'>`;

    if (hasSharp) {
    html += `<div class='blacknote'onmousedown='noteDown(this, true)'
    data-note='${note + '#' + (octave+4)}'></div>`;
    }
    html += '</div>';
}
}
document.getElementById('container').innerHTML = html;

function noteDown(elem, isSharp) {
  var note = elem.dataset.note;


  synth.triggerAttackRelease(note, "4n");

  event.stopPropagation()
}

// Controls___________________________________________


var gain = new Nexus.Dial("#gain",{

  'size': [75,75],
  'interaction': 'vertical',
  'mode': 'absolute',

})


 gain.on('change',function(v) {
	volume.volume.rampTo(v,.1)
});
gain.min = -100;
gain.max = 0;
gain.value = -10;
gain.colorize("accent","white")
gain.colorize("fill","#333")
document.body.style.backgroundColor = "#000"






</script>

</body>

</html>
